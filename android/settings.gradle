pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
}

plugins {
    id 'org.gradle.toolchains.foojay-resolver-convention' version '0.4.0'
}

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_PROJECT)
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.name = 'hakathon'
include ':app'

def flutterProjectRoot = rootProject.projectDir.parentFile.getAbsolutePath()
def plugins = new File(flutterProjectRoot, '.flutter-plugins')
def pluginsFile = new File(plugins, 'flutter.plugins')

if (pluginsFile.exists()) {
    pluginsFile.eachLine { line ->
        def pluginLine = line.split('=')
        def pluginName = pluginLine[0].trim()
        def pluginPath = pluginLine[1].trim()
        include ":$pluginName"
        project(":$pluginName").projectDir = new File(pluginPath, 'android')
    }
}